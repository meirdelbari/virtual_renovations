<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>AlgoreitAI - Virtual Renovations</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link rel="stylesheet" href="styles.css" />
    <link rel="stylesheet" href="landing.css" />
    <!-- PDF.js for rendering PDF floor plans to images -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.min.js"></script>
    <script>
      pdfjsLib.GlobalWorkerOptions.workerSrc = 'https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.worker.min.js';
    </script>
    <!-- Google Fonts for a more professional look -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
  </head>
  <body>
    <!-- Landing Page -->
    <div id="landing-page" class="landing-page" style="display: none;">
      
      <!-- Navbar -->
      <nav class="landing-nav">
        <div class="nav-logo">
          <span class="nav-emoji">ü§ñ</span>
          <span class="nav-title">AlgoreitAI</span>
        </div>
        <div class="nav-links">
          <button id="nav-start-btn" class="nav-cta">Start Free</button>
        </div>
      </nav>

      <!-- Hero Section -->
      <header class="hero-section">
        <div class="hero-content">
          <div class="hero-title-row">
            <div class="hero-badge">
              <span style="display: block; font-size: 16px;">‚ú® #1</span>
              <span style="display: block;">AI Home Design</span>
              <span style="display: block; font-size: 10px; opacity: 0.9;">Technology</span>
            </div>
            <h1>Redesign & Stage Your Home<br>in Seconds with AI</h1>
          </div>
          <p class="hero-subtitle">
            <span class="highlight-text">AlgoreitAI‚Äôs unique power</span> is generating "wow" designs that keep it real. We don't just create theoretical magazine photos‚Äîwe suggest stunning transformations that preserve your home's layout and can be practically executed.
          </p>
          <div class="gallery-display">
            <div class="gallery-card">
              <!-- Removed Badges -->
              
              <div class="comparison-slider" id="main-slider">
                <div class="comparison-image-container">
                  <!-- Main Images -->
                  <img src="" alt="Before" class="img-before" id="img-before">
                  <img src="" alt="After" class="img-after" id="img-after">
                  
                  <!-- Handle -->
                  <div class="slider-handle" id="slider-handle" style="left: 0%;">
                    <div class="slider-button">‚Üî</div>
                  </div>
                  
                  <!-- Labels -->
                  <div class="slider-labels">
                    <span class="label-overlay" id="label-before">Before</span>
                    <span class="label-overlay" id="label-after">After</span>
                  </div>

                  <!-- Range Input for Manual Override -->
                  <input type="range" min="0" max="100" value="0" class="slider-range" id="slider-range">
                </div>
              </div>
              
              <!-- Removed Info/Title below -->
            </div>
          </div>

          <div class="hero-cta-group">
            <button id="landing-start-btn" class="primary-btn">
              Generate Your Design 
              <span class="btn-icon">‚Üí</span>
            </button>
            <p class="trial-text">No credit card required ¬∑ Free beta access</p>
          </div>
        </div>
      </header>

      <!-- How It Works -->
      <section class="steps-section">
        <div class="section-header">
          <h2>How It Works</h2>
          <p>Professional results in 3 simple steps</p>
        </div>
        <div class="steps-grid">
          <div class="step-card">
            <div class="step-icon">üì∏</div>
            <h3>1. Upload Photo</h3>
            <p>Take a picture of your room, house, or garden.</p>
          </div>
          
          <!-- Arrow 1 -->
          <div class="step-arrow">
            <svg width="40" height="20" viewBox="0 0 40 20" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M2 10C10 2 30 2 38 10" stroke="#cbd5e1" stroke-width="2" stroke-linecap="round" stroke-dasharray="4 4"/>
              <path d="M34 6L38 10L34 14" stroke="#cbd5e1" stroke-width="2" stroke-linecap="round"/>
            </svg>
          </div>

          <div class="step-card">
            <div class="step-icon">‚ú®</div>
            <h3>2. Choose Style</h3>
            <p>Select from Modern, Minimalist, Industrial, and 30+ more.</p>
          </div>

          <!-- Arrow 2 -->
          <div class="step-arrow">
            <svg width="40" height="20" viewBox="0 0 40 20" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M2 10C10 18 30 18 38 10" stroke="#cbd5e1" stroke-width="2" stroke-linecap="round" stroke-dasharray="4 4"/>
              <path d="M34 6L38 10L34 14" stroke="#cbd5e1" stroke-width="2" stroke-linecap="round"/>
            </svg>
          </div>

          <div class="step-card">
            <div class="step-icon">üöÄ</div>
            <h3>3. Generate</h3>
            <p>Get unlimited realistic variations in seconds.</p>
          </div>
        </div>
      </section>

      <!-- Use Cases Grid -->
      <section id="features" class="features-section">
        <div class="section-header">
          <h2>Why Choose AlgoreitAI?</h2>
        </div>
        <div class="features-grid">
          <div class="feature-card">
            <div class="feature-icon">üß†</div>
            <h3>State-of-the-Art AI Made Simple</h3>
            <p>We harness the world's most advanced AI technology but hide the complexity. You get a simple, intuitive tool that delivers professional-grade results for your home instantly.</p>
          </div>
          <div class="feature-card">
            <div class="feature-icon">üè†</div>
            <h3>Real & Reliable Designs</h3>
            <p>Unlike other tools that hallucinate impossible structures, our AI respects your home's actual layout. The results are realistic, practical, and truly achievable.</p>
          </div>
          <div class="feature-card">
            <div class="feature-icon">üé®</div>
            <h3>Endless Style Possibilities</h3>
            <p>Explore unlimited renovation and staging styles. From Scandinavian to Industrial, easily visualize thousands of potential futures for your space in seconds.</p>
          </div>
        </div>
      </section>

      <div class="landing-footer">
        <div class="footer-links">
          <span>¬© 2024 AlgoreitAI</span>
          <a href="#">Terms</a>
          <a href="#">Privacy</a>
          <a href="mailto:AlgoreitAI@gmail.com">Contact</a>
        </div>
        <span class="beta-badge">Beta v1.0</span>
      </div>
    </div>

    <!-- Main App (Hidden initially) -->
    <div id="app" style="display: none;">
      <!-- Header -->
      <header class="app-header">
        <div class="app-header-left">
          <span class="app-logo-emoji" aria-hidden="true">ü§ñ</span>
          <span class="app-title">AlgoreitAI-Virtual Renovations</span>
        </div>
        <div class="app-header-right">
          <div id="user-button"></div>
        </div>
      </header>

      <!-- Main content -->
      <main class="app-main">
        <section class="operations-bar" aria-label="Main operations">
          <button class="op-btn op-btn-accent" type="button" data-role="upload-photos">Upload Photos</button>
          <button class="op-btn" type="button" data-role="room-viewer">Room</button>
          <button class="op-btn" type="button" data-role="enhance-photos">Enhance Quality</button>
          <button class="op-btn" type="button" data-role="renovate-selector">Renovate ‚ñæ</button>
          <button class="op-btn" type="button" data-role="furniture-selector">Furniture ‚ñæ</button>
          <button class="op-btn" type="button" data-role="style-selector">Style ‚ñæ</button>
          <button class="op-btn op-btn-gemini" type="button" data-role="gemini-ai" title="Process with AlgoreitAI">‚ú® AlgoreitAI</button>
          <button class="op-btn op-btn-reset" type="button">Reset</button>
          <button class="op-btn guide-btn" type="button" data-role="guide-me" title="Show usage guide">Guide Me</button>
          <input id="photo-file-input" type="file" accept="image/*" multiple style="display: none" />
        </section>

        <section class="app-workspace">
          <div id="photos-container"></div>
          <div id="measurements-table-container"></div>
        </section>
      </main>
    </div>

    <!-- Features Scripts -->
    <script src="features/uploadPhotos.js"></script>
    <script src="features/roomViewer.js"></script>
    <script src="features/enhancePhotos.js"></script>
    <script src="features/geminiAI.js"></script>
    <script src="features/styleSelector.js"></script>
    <script src="features/renovateSelector.js"></script>
    <script src="features/furnitureSelector.js"></script>
    <script src="features/resetApp.js"></script>
    <script src="features/guideMe.js"></script>
    <script src="features/auth.js"></script>
    <script src="main.js"></script>
    
    <script>
      // ==========================================
      // AUTOMATIC LOCAL PHOTO LOADER
      // ==========================================
      // Instructions:
      // 1. Create a folder named "gallery" in the root directory.
      // 2. Add your photo pairs there using this naming convention:
      //    1_before.jpg, 1_after.jpg
      //    2_before.jpg, 2_after.jpg
      //    ... up to 10 pairs.
      // 3. The code below will automatically find them.
      // 4. If no local photos are found, it falls back to the Demo Mode.
      // ==========================================

      const demoPairs = [
        // 1. Modern Living Room
        {
          before: "https://images.unsplash.com/photo-1505693314120-0d443867891c?w=1200", 
          after: "https://images.unsplash.com/photo-1518241353330-0f7941c2d9b5?w=1200", 
          category: "Demo Interior",
          style: "Modern",
          title: "Living Room Makeover",
          desc: "Bright, airy, and contemporary transformation."
        },
        // 2. Cozy Bedroom
        {
          before: "https://images.unsplash.com/photo-1583847661884-3883d81a6152?w=1200",
          after: "https://images.unsplash.com/photo-1501183638710-841dd1904471?w=1200",
          category: "Demo Interior",
          style: "Cozy Warmth",
          title: "Bedroom Refresh",
          desc: "Adding warmth and texture to a plain space."
        },
         // 3. Garden
        {
          before: "https://images.unsplash.com/photo-1523217582562-09d0def993a6?w=1200",
          after: "https://images.unsplash.com/photo-1564013799919-ab600027ffc6?w=1200",
          category: "Demo Exterior",
          style: "Landscape",
          title: "Garden Design",
          desc: "From basic yard to lush paradise."
        },
      ];

      // We will try to load pairs 1 to 10 from the 'gallery' folder
      // If we find them, we use them. If not, we use demoPairs.
      
      let galleryPairs = [];

      async function checkImage(src) {
        return new Promise((resolve) => {
          const img = new Image();
          img.onload = () => resolve(true);
          img.onerror = () => resolve(false);
          img.src = src;
        });
      }

      async function findLocalImages() {
        const foundPairs = [];
        // Try up to 10 pairs
        for (let i = 1; i <= 10; i++) {
          const beforeSrc = `gallery/${i}_before.jpg`;
          const afterSrc = `gallery/${i}_after.jpg`;
          
          // Check if both exist
          const [hasBefore, hasAfter] = await Promise.all([
            checkImage(beforeSrc),
            checkImage(afterSrc)
          ]);

          if (hasBefore && hasAfter) {
            foundPairs.push({
              before: beforeSrc,
              after: afterSrc,
              category: "My Project",
              style: `Design #${i}`,
              title: `Renovation Project ${i}`,
              desc: "Custom renovation from local folder."
            });
          }
        }
        return foundPairs;
      }

      // Enhanced Slider & Slideshow Logic
      async function initGallery() {
        // Elements
        const slider = document.getElementById('main-slider');
        const imgBefore = document.getElementById('img-before');
        const imgAfter = document.getElementById('img-after');
        const handle = document.getElementById('slider-handle');
        const range = document.getElementById('slider-range');
        const labelBefore = document.getElementById('label-before');
        const labelAfter = document.getElementById('label-after');

        // 1. Discover Images
        const localPairs = await findLocalImages();
        
        if (localPairs.length > 0) {
          galleryPairs = localPairs;
          console.log("Using Local Gallery Images:", galleryPairs);
        } else {
          galleryPairs = demoPairs;
          console.log("No local images found in 'gallery/' folder. Using Demo Mode.");
        }

        if (galleryPairs.length === 0) return; // Safety

        let currentIndex = 0;
        let isInteracting = false;
        let interactionTimeout;
        
        // Manual Interaction
        if(range) {
          range.addEventListener('input', (e) => {
            const value = parseFloat(e.target.value);
            setSliderPos(value);
            isInteracting = true;
            clearTimeout(interactionTimeout);
            interactionTimeout = setTimeout(() => {
              isInteracting = false;
            }, 8000); // Pause automation for 8s after interaction
          });
        }
        
        function setSliderPos(percentage) {
          handle.style.left = percentage + '%';
          const insetRight = 100 - percentage;
          imgAfter.style.clipPath = `inset(0 ${insetRight}% 0 0)`;
          
          // Update Labels Visibility (Strict Toggle at 50%)
          if(percentage < 50) {
            labelBefore.classList.add('label-visible');
            labelAfter.classList.remove('label-visible');
          } else {
            labelBefore.classList.remove('label-visible');
            labelAfter.classList.add('label-visible');
          }
        }

        function preloadImage(src) {
          const img = new Image();
          img.src = src;
        }

        function preloadNext() {
          const nextIdx = (currentIndex + 1) % galleryPairs.length;
          preloadImage(galleryPairs[nextIdx].before);
          preloadImage(galleryPairs[nextIdx].after);
        }

        function loadPair(index) {
          const pair = galleryPairs[index];
          
          // Fade Out
          imgBefore.style.opacity = '0';
          imgAfter.style.opacity = '0';
          
          setTimeout(() => {
            // Swap
            imgBefore.src = pair.before;
            imgAfter.src = pair.after;
            
            // Reset
            setSliderPos(0);
            range.value = 0;
            
            // Fade In
            setTimeout(() => {
              imgBefore.style.opacity = '1';
              imgAfter.style.opacity = '1';
              
              // Animate
              if(!isInteracting) {
                setTimeout(() => {
                  setSliderPos(100);
                  range.value = 100;
                }, 900); 
              }
            }, 100);
          }, 500);
        }

        // Initial Load
        loadPair(0);
        preloadNext();

        // Main Loop
        setInterval(() => {
          if (isInteracting) return;
          if (galleryPairs.length <= 1) return; // Don't cycle if only 1 pair

          currentIndex = (currentIndex + 1) % galleryPairs.length;
          loadPair(currentIndex);
          preloadNext();
          
        }, 3000);
      }

      // Nav Start Button Logic
      const navBtn = document.getElementById('nav-start-btn');
      const mainStartBtn = document.getElementById('landing-start-btn');
      if(navBtn && mainStartBtn) {
        navBtn.addEventListener('click', () => mainStartBtn.click());
      }

      // Initialize
      if (document.readyState === 'loading') {
        document.addEventListener('DOMContentLoaded', initGallery);
      } else {
        initGallery();
      }
    </script>
  </body>
</html>
